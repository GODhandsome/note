<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <h1>作用域链</h1>
  <pre>
    当查找变量的时候，会先从当前上下文的变量对象中查找，如果没有找到，
    就会从父级执行上下文的变量对象中查找，一直找到全局上下文的变量对象，
    就是全局对象，这样由多个执行上下文的变量对象构成的链表就叫做作用域链。
  </pre>

  <pre>
    <h2>函数创建</h2>
    函数的作用域在函数定义的时候就决定了，是因为函数有一个内部属性[[scope]]，
    当函数创建的时候，就会保存所有父变量对象到其中，可以理解成[[scope]]就是
    所有父变量对象的层级链，但是：[[scope]]并不代表完整的作用域链
  </pre>

  <pre>
    <h2>函数激活</h2>
    当函数激活时。进入函数上下文，创建VO/AO，就会将活动对象添加到作用链的前端
    这时执行上下文的作用域链就是 Scope = [AO].concat([[Scope]])
  </pre>
  <script>
    // 在foo创建的时候
    // foo.[[scope]] = [
    //   globalContext.VO
    // ]
    // bar.[[scope]] = [
    //   fooContext.AO
    //   globalContext.VO,
    // ]
    function foo() {
      function bar() {

      }
    }
  </script>
</body>
</html>